<Page x:Class="RetailMobile.Presentation.ProductDetailPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:RetailMobile.Presentation"
      Background="#F8F8F8">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header with Back Button -->
        <Grid Grid.Row="0" 
              Height="60" 
              Padding="16,8">
            <Button Width="52" 
                    Height="52"
                    Background="White"
                    CornerRadius="26"
                    HorizontalAlignment="Left"
                    Click="OnBackButtonClick"
                    Padding="0">
                <FontIcon Glyph="&#xE76B;" 
                          FontSize="20"
                          Foreground="#416954" />
            </Button>
        </Grid>

        <!-- Product Image -->
        <Grid Grid.Row="1" 
              Height="350"
              Background="#9DE3E3E3"
              Padding="0,40,0,0">
            <Image Source="{x:Bind ViewModel.Product.ImageUrl, Mode=OneWay}"
                   Width="240"
                   Height="280"
                   Stretch="Uniform"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center" />
        </Grid>

        <!-- Product Info -->
        <ScrollViewer Grid.Row="2" 
                     Padding="32,20">
            <StackPanel Spacing="12">
                <!-- Product Name -->
                <TextBlock Text="{x:Bind ViewModel.Product.ProductName, Mode=OneWay}"
                          FontFamily="Inter"
                          FontSize="20"
                          FontWeight="SemiBold"
                          Foreground="#304E3E" />

                <!-- Category -->
                <TextBlock Text="{x:Bind ViewModel.Product.CategoryName, Mode=OneWay}"
                          FontFamily="Inter"
                          FontSize="18"
                          Foreground="#8E8E8E" />

                <TextBlock FontFamily="Montserrat"
                        FontSize="18"
                        FontWeight="SemiBold"
                        Foreground="#EDB310"
                        Margin="0,4,0,0">
                <Run Text="{x:Bind ViewModel.Product.Price, Converter={StaticResource DecimalToCurrencyConverter}}" />   
                </TextBlock>

                <!-- Quantity Selector -->
                <StackPanel Orientation="Horizontal" 
                           Spacing="16"
                           Margin="0,20,0,0">
                    <TextBlock Text="Số lượng:"
                               FontFamily="Inter"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="#304E3E"
                               VerticalAlignment="Center" />

                    <Border Background="#E8F5E9"
                            CornerRadius="25"
                            Padding="4">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <!-- Minus Button -->
                            <Button Width="40" Height="40"
                                    Background="#416954"
                                    BorderThickness="0"
                                    CornerRadius="20"
                                    Padding="0"
                                    Click="OnDecreaseQuantityClick">
                                <FontIcon Glyph="&#xE738;" 
                                          FontSize="16"
                                          Foreground="White" />
                            </Button>

                            <!-- Quantity -->
                            <Border Width="50" Height="40"
                                    Background="Transparent">
                                <TextBlock Text="{x:Bind ViewModel.Quantity, Mode=OneWay}"
                                          FontFamily="Inter"
                                          FontSize="20"
                                          FontWeight="Bold"
                                          Foreground="#416954"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center" />
                            </Border>

                            <!-- Plus Button -->
                            <Button Width="40" Height="40"
                                    Background="#416954"
                                    BorderThickness="0"
                                    CornerRadius="20"
                                    Padding="0"
                                    Click="OnIncreaseQuantityClick">
                                <FontIcon Glyph="&#xE710;" 
                                          FontSize="16"
                                          Foreground="White" />
                            </Button>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Add to Cart Button -->
        <Grid Grid.Row="3" 
              Padding="29,0,29,20">
            <Button HorizontalAlignment="Stretch"
                    Height="54"
                    Background="#2C4939"
                    CornerRadius="30"
                    Click="OnAddToCartClick">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="1"
                              Text="Add to cart"
                              FontFamily="Inter"
                              FontSize="16"
                              FontWeight="Medium"
                              Foreground="White"
                              VerticalAlignment="Center" />

                    <Border Grid.Column="2"
                            Width="1"
                            Height="20"
                            Background="#76CD9F"
                            Margin="16,0" />

                    <TextBlock Grid.Column="3"
                              FontFamily="Inter"
                              FontSize="16"
                              FontWeight="Medium"
                              Foreground="White"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Left"
                              Text="{x:Bind ViewModel.TotalPriceText, Mode=OneWay}" />
                </Grid>
            </Button>
        </Grid>
    </Grid>
</Page>
